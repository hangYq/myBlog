<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>同源策略以及跨域 | my blog</title>
    <meta name="description" content="">
    <link rel="icon" href="/myBlog/logo.jpg">
    
    <link rel="preload" href="/myBlog/assets/css/0.styles.2a97a6b5.css" as="style"><link rel="preload" href="/myBlog/assets/js/app.d8f8619c.js" as="script"><link rel="preload" href="/myBlog/assets/js/2.5db888ed.js" as="script"><link rel="preload" href="/myBlog/assets/js/4.2642395b.js" as="script"><link rel="prefetch" href="/myBlog/assets/js/10.3dc58f71.js"><link rel="prefetch" href="/myBlog/assets/js/11.4197620c.js"><link rel="prefetch" href="/myBlog/assets/js/12.7db202de.js"><link rel="prefetch" href="/myBlog/assets/js/13.71a1653a.js"><link rel="prefetch" href="/myBlog/assets/js/14.7bd57895.js"><link rel="prefetch" href="/myBlog/assets/js/15.9c140aad.js"><link rel="prefetch" href="/myBlog/assets/js/16.880844ea.js"><link rel="prefetch" href="/myBlog/assets/js/17.078568c6.js"><link rel="prefetch" href="/myBlog/assets/js/18.b2f7ee97.js"><link rel="prefetch" href="/myBlog/assets/js/19.b1b5eed1.js"><link rel="prefetch" href="/myBlog/assets/js/20.c8aef067.js"><link rel="prefetch" href="/myBlog/assets/js/21.8282c276.js"><link rel="prefetch" href="/myBlog/assets/js/22.0cbcb812.js"><link rel="prefetch" href="/myBlog/assets/js/23.c5a64cda.js"><link rel="prefetch" href="/myBlog/assets/js/24.198c0fca.js"><link rel="prefetch" href="/myBlog/assets/js/25.58e06575.js"><link rel="prefetch" href="/myBlog/assets/js/26.35549084.js"><link rel="prefetch" href="/myBlog/assets/js/27.28368dd2.js"><link rel="prefetch" href="/myBlog/assets/js/28.78d234bf.js"><link rel="prefetch" href="/myBlog/assets/js/29.b8b8320c.js"><link rel="prefetch" href="/myBlog/assets/js/3.589cb5ed.js"><link rel="prefetch" href="/myBlog/assets/js/30.7634ab74.js"><link rel="prefetch" href="/myBlog/assets/js/31.5541885c.js"><link rel="prefetch" href="/myBlog/assets/js/5.adb17ef7.js"><link rel="prefetch" href="/myBlog/assets/js/6.d155b55b.js"><link rel="prefetch" href="/myBlog/assets/js/7.ca32e00c.js"><link rel="prefetch" href="/myBlog/assets/js/8.6cbd6d63.js"><link rel="prefetch" href="/myBlog/assets/js/9.61a2a9e3.js">
    <link rel="stylesheet" href="/myBlog/assets/css/0.styles.2a97a6b5.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/myBlog/" class="home-link router-link-active"><!----> <span class="site-name">my blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"> <a href="https://github.com/yuhang04210/myBlog" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"> <a href="https://github.com/yuhang04210/myBlog" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>CSS</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>HTTP</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/myBlog/HTTP/同源策略以及跨域.html" class="active sidebar-link">同源策略以及跨域</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/myBlog/HTTP/浏览器的协商缓存与强缓存.html" class="sidebar-link">浏览器的协商缓存与强缓存</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>JavaScript</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>React</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Vue</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>其他</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>小程序</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h3 id="同源策略以及跨域"><a href="#同源策略以及跨域" aria-hidden="true" class="header-anchor">#</a> 同源策略以及跨域</h3> <h3 id="一、同源策略"><a href="#一、同源策略" aria-hidden="true" class="header-anchor">#</a> 一、同源策略</h3> <p>同源策略(Same-Origin Policy)。所谓的 同源 是<code>域名、协议、端口号</code>相同。不同的客户端脚本（javascript，ActionScript）在没有授权的情况下，不能读取对方资源。简单来说，浏览器允许包含在页面 A 的脚本访问第二个页面 B 的数据资源，这一切是建立在 A 和 B 页面是同源的基础上。</p> <h3 id="二、跨域与跨域请求"><a href="#二、跨域与跨域请求" aria-hidden="true" class="header-anchor">#</a> 二、跨域与跨域请求</h3> <p>跨域 简单的来说，指的是两个资源非同源。出于安全方面的考虑，页面中的 JavaScript 在请求非同源的资源时就会出 跨域问题 ——即跨域请求，这时，由于同源策略，我们的请求会被浏览器禁止。也就出现了 我们常说的 跨域 问题。</p> <p>下面，我们看一下，具体哪些情况会出现跨域问题(具体策略限制)：
<img src="/myBlog/assets/img/origin.67715d56.jpg" alt="策略限制图"></p> <h3 id="三、跨域解决方案"><a href="#三、跨域解决方案" aria-hidden="true" class="header-anchor">#</a> 三、跨域解决方案</h3> <h4 id="_1-jsonp-跨域"><a href="#_1-jsonp-跨域" aria-hidden="true" class="header-anchor">#</a> 1. JSONP 跨域</h4> <p>为了便于客户端使用数据，逐渐形成了一种非正式传输协议。人们把它称作 JSONP。该协议的一个要点就是允许用户传递一个 callback 参数给服务端，然后服务端返回数据时会将这个 callback 参数作为函数名来包裹住 JSON 数据，这样客户端就可以随意定制自己的函数来自动处理返回数据了。</p> <p>JSONP 实现原理:</p> <ul><li>js 请求资源会被限制，但是在页面中，<code>script</code>标签是没有限制的，<code>img，iframe</code>标签也是一样的；</li> <li>通过 sctipt 标签的 src 属性，请求服务器，并且通过参数（如：<code>?callback=func</code>,func 为本地的一个方法）,告诉服务器返回指定格式的 js 脚本，并将数据封装在此脚本中；</li> <li>服务器在配合客户端返回一段脚本(如：<code>{count: 1, start: 0, total: 1572}</code>),其实返回的就是客户端一个本地的可执行方法，并且将要返回的数据封装在了参数里;</li> <li>请求到资源后，本地就会执行此方法，通过对参数的处理，也就获取到了我们所要的数据。</li></ul> <p>假如我们想要请求豆瓣 API 的接口去获取数据<code>https://api.douban.com/v2/book/search?q=javascript&amp;count=1</code>，直接在浏览器里输入地址请求可以返回数据，是没有问题的。如图：
<img src="data:image/png;base64,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" alt="豆瓣API正常请求"></p> <p>但是如果我们执行下下面一段代码的时候可能会出现跨域问题而报错。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token constant">DOCTYPE</span> html<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>html lang<span class="token operator">=</span><span class="token string">&quot;en&quot;</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>head<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>meta charset<span class="token operator">=</span><span class="token string">&quot;UTF-8&quot;</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>title<span class="token operator">&gt;</span><span class="token constant">JSONP</span>跨域<span class="token operator">&lt;</span><span class="token operator">/</span>title<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>head<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>body<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>button id<span class="token operator">=</span><span class="token string">&quot;btn&quot;</span><span class="token operator">&gt;</span>点击<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
        window<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        	<span class="token keyword">let</span> btn <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'btn'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        	btn<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		        <span class="token keyword">let</span> xhr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		        <span class="token comment">//豆瓣图书API地址</span>
		        <span class="token keyword">let</span> url <span class="token operator">=</span> <span class="token string">'https://api.douban.com/v2/book/search?q=javascript&amp;count=1'</span>
		        xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">'get'</span><span class="token punctuation">,</span>url<span class="token punctuation">)</span><span class="token punctuation">;</span>
		        xhr<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		        <span class="token keyword">if</span><span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>readystateonchange <span class="token operator">==</span> <span class="token number">4</span> <span class="token operator">&amp;&amp;</span> xhr<span class="token punctuation">.</span>status <span class="token operator">==</span> <span class="token number">200</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'success'</span><span class="token punctuation">,</span>xhr<span class="token punctuation">.</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span>
		        <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
		        	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'err'</span><span class="token punctuation">,</span>xhr<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>html<span class="token operator">&gt;</span>
</code></pre></div><p>浏览器截图为：
<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAABeYAAADfCAMAAACklvOuAAAAAXNSR0IArs4c6QAAAKtQTFRF////Wlpa/wAA4+Pk/9fXzc3NVFRU8/Pz//Hx0dHR8PDwb25ujIuLw8PD+Pj5/3Fx/8nJ/5WV/93ddHR0hoSEmZWVsbGx/1ZXn5+f/7W1e3l5zMfH/+fn3tXVq6uruLe3+jU3Aqn13Nzc8eTkm5ubta2t/0ZGICAgiYmJYWFh+enpNzc3/xwcYGHRdIriEx60cnJyxcvytLS0pKSknbDprqbt5YSEzbCx4MvKGVwKewAAIABJREFUeNrtnQlf2kzXxsVUMCEhYkgMpAZeineh2JbW+36+/0d75yyTjbC51KXX/1eqkMx+5pozZ6KeuQAAAD4wZz0AAAAfGMg8AABA5gEAAEDmAQAAQOYBAAC8VZn3Er8k8SpXLtCNAADwAWQ+CkoiyDwAALw3mb/9nRRceNsyvyk/8/qQeQAAeGcy743SkhFkHgAAPprMV2S8FznPJPN+8Kdb5EaPSBR13D/e9ZPg1Uef+qrTUg0/fZvW2nlKlxmbfny7WiYEAO9Q5vt7ZN5znHnfcRzvaJkPOobgKJlPD9/jdHiC+oUYO9GjZZ5rVm9f8uyylq/X6/wZZD7qdKJnqVCUHtlX6alSGmkmneTJlQzYZp5qLGIwQbtSO0d0Z0oWApkHH13mJ42gzUXUJybz42XeP9qbP0rmI/fZZN4nPanXIHnmbp1MzH/x02U+MvcEz6Ewrt9xXkrmZSeURE/uxICqkzyLzCd+9ASZT6g5kHnwUWXeM7RNwP6G6D9K5pNOx6fvOp3U6bBb7rK35Ebmo6Tns3Nt/nP3yTwrEsk850YZpJS3n/AUTCS5KcOnG6PogMz3zKpRVMv3uTodfu9GScdNUt840RE70j5/nKSpVDCiKh+obS+YWB0Vpz6P4/XaZR9/Ip6+KzIvH+yJUqi6SA2djvQo1bleE2nLXnXkpcwPIt7JdFzeJXDQxtGsXM6KR0NHTbo0anq2W/sEX5x5KoATUR92nFT2TFL1XifopJ0DGyd7TczDNNdkxqNlMuI2m5qZz7JD+bAsk19gO4wak1LQJmDDoTolB2SelgOthyamDE2ptJpFCZQDvGOZD/yHwNkW+mApDuhjZJ58NJ/U3ExXkhXXzD4jzKTVqXmJg3bA6zfzNU1Z5jU3moVBaj736duA56TDZRjp2h+CFZl3KtXieU2Os08VIleO9c7hguRS0gmoyjzBA/rA3ad9E10DnLURunVg1Ny8Jj13xeWvSP4dknn6dpLvDR/Il5Tdy0Lm6Wu1JofPIzqOrJOmUdRwGgiTqcq8ZJWKO62jUXYpd8M+RXXJ1Q1S7USqjulD22Fa9R4vTK68do9yIl/YPByylFLmO/KVqncoHzYCWgdsh1FjEl4r2HAOxejYm09tPWxilXmTZ5BCOMB7lvnbSb+/GT0Ec++pMi8RcBIll2IGLOT6Er9PxMlMnlS98v0yT+uD79rcaLaSvidm0iUSzDHZUC7GlfQPBm2M8NhqJTKvXV929K51Fe1LLqtoiJ7yvf4enVmpE56ThAex8eZJ8o24F2tAHJDM07fuXnc+4B1FRxzUQuaTXr0mbueIQBXJFLfWqDL56dTYqFgAim5WmS+6NCiW7J0yT50TObYTTXV0o8DZ98oSSSSjAwEgcr3FPKTzC5lPSpk/nI+pi1Pb/kglrMz7B2S+w96+1sMmVpk3rw4iOOBdy7yzlCB8/mSZL7z5qMPhkIrM8xFXXebNXckBmXdZmjU3nuZGWlzfTV2JnJqpTfm7nQOzkBagqFetFiVlD80KeVXmE57zKvPix/ESti9qs9JrcSARHJX5XrBe6xoQ5yTzq/X6QNSGCnNE0yK3qlr1mgQHAiu+iKNKlsuRGm1sx7HOqRw8qsxXu/SQzFMePneiVKci87bqUmIk0rk/BGTNQ6LwZdCmlPnD+VBppOnaYdyYUuZNCf6BRYL3NVIPm9jKPEI24N3H5nNS+ZHrPV/QRt3epjffq8u8RE32ybyZferN9/QkLTGFJBQRqLqeFPE/6NmW3riV+cKbb8g8BR0q3rxf+ND7yONWb14iNg1v/iCm9MIlLmW+WZMg2rtKimIVYkky6BbevG9DJY/05s0gmNttJ5aefM2b5zi9e/Ao01RBzUO+uC0yfzAfWW78XtFhbpGJbgPS9EDQxuwetB5FYuvN+x3oBnjXMt8LNkbmp83o/FNkPvGbMq8xhkLmZTqlh2S+R36r5sYfuD7t3v2eBpJ7KvPNpyTaa1apVhmbT7ZlPuFHBW2kl+5Kegefsl+Tzk80Nu9WZN5ZaWyej2DzySGJl+WPA9y+hr5tDKJek71RDIl/kN5pyIIOwrWxFHWmrKh1SUc1Lqh16UGZpyMS6Sm3KfO26izzQbo3p8ThoVTzoHXHdTlAXpX55HA+etIjLaMOSyqxeck8OCTzplyth01MLelwbD5BbB68V5mXH3+6nWx8fxI83ZvvcLCDJlxaPEFvXwE/72BlnsIs0f5HRWRyBqQiklvPJ6Wib3gLncij8Crzvb3+lhWtslqiHVynLZknR7j05vmugD/cHxyerNfrQJ60CXpW5oO1fd6G5J+etInl+qEoMT0aQuWZnvJtqLlak+DAkz9y0Sion0hGnaRoLD94Q1mZsujE1608aeMcKfO8RIs4Uv5VmbdVl0ja/qfiHX1ePdCh4BqYelRlXmJy+/Nxi4Nr7TB+tEaCNmQ4aWd/jIvNIYlsPTQx9ZIxAyq6g7ANeKcyT7/s4LbnjCbz+ZbOny7z4C1iH2h6pUNEp/O28gHgL5N5/tVl856XTL3e3F/WdSCY8G8020DmIfNPIE3fVj4A/G0yrwrOT807jV9RyRF7Q4JfRAyZf7wPHr2pfAD4W2V+x8xa+DXwZ0UAAOBDyTwAAADIPAAAAMg8AAAAyDwAAADI/Nvi/54J9CQAADIPmQcAgONl/gI8C88l8+hJAMDzAm8eAAAQtAEAAACZBwAAAJl/9eaC1wezDgDIPGQeMg8AeEsy//Z/ddkFZB4yDwBkHjIPIPMAfGCZ95IGbb+Q3JsHv6eB40HmwTuSeS9Qm27+6UsA/i6ZdzZpmm7i1GL/TlSVeT6J+v1o0lwCIPPgLct8kDnE3MkCTHjwV8s8/UGeSantk/m2K7/sR8vYH0Ub34HMgxeQeWfrT3H7pTIn7X8Z0D34p6QSxzPMuwvnsX+pO6mXYf9SPADvU+Y9b6fML/v93DE3BJNN7O2S+eAN/JXOi+lvItsv81P/bO5Dc19T5o2qG5xWUS8/sSZ1lMwHPPTTmueRz8mZX627WV69s1H2aUDmwTuW+UDjl1sy7yX9TT+iq54b9QPvDcv8fEJ/tnbi7pJ5fzQascCTzPsedPf1ZJ5kulMqZuQ+VeaziMe+Zr0P87k7n6zXD/OHSsY+WWsAmQd/ocznUcxHrNsyv+xPF5vNlHR+0Y93yHxiPKTAzNxOJ6GpEHVe429Le+mm36/tOBoyP1e9gcy/AZk31kJxkE7Hpf98NiEjwKTCxnj8QExKZZ4sS4Q9TeUNv0sooYx9TGP/4NVlPu4u1+vRvCLzgV+sEokp2eesuD5GwJM07djFxydTNkXTfR0nZYPmenGdE4rgdBLoCHhfMm9cIZLyLZl3oo1n9DMyF72L/mSfN+/wVAjMDHF6QfQKjXJGphVOb7/MT3OSeXHsF6PR1PyfjRYQ4T8u873I6UUBqz158ylLeCnzVW+eLCvx+bbI0TdG5qsOPW3lRnXf4uGiu16vV/OqzPt23+CSSJsCKf5eyLwxXkccFNlCkMyT2pvPTYm2Xi7fZBcYAN6TzPc3eZvMbyKP/OTNb68372/2yXySyDd+InP4zzONNol3lMyzN5/nZ2ejuRF7SPCryLzr+qK8GrQxGt8u82xZHVZd374hma8c3Hp5RK5I3ZvPuuuuW5N5MsuUvHHZS8hHhcxT4alsIXwr81GveKk3L1GmjgsVAe/Qm893ePMOx0Oi34e8eZ4gZp7yVIheYxY4cf1hoO3YfF6VeZL36fRsMYUEv443z8ehHZF5l0M37TKf8n1krMbG9A3pblB5QsdZLhqexcPtPOgGRuVvm958mnByNn5TeBm0kWt8C3nr7TLvS6TJgYqA9ybzG39HbH7U57j8wybK452x+bo3H8hUfQXc+kOe+715b0QYmc8gwa8g80bRXQ18GJmnKJ/9pN2bZ5GOevaNRGwqwcGL2+bebno7J1/+djotD5HSisxbb75XlfnikDVN22U+CsSbh8yD9ybz00AeqdyW+bw/oQXAbIo3mz1P2vg2Nu/2/Mhuel+bA0EbDdZA5l9D5gO1FivzPj8Fw4F3lXm/UGYbnUn8tGffiMw7e86A5tMHYVox6k5akXmOzZti+Igg4ILLQFCwS+ZdcxNkHrxDmd/93Lyz7I8yx6Ofkur7O5+b79knbWhTm3Q6Ue+ty7x5o9EayPxrPDfv2+8iifBFnU7q88MzSfFES/GkDUV3+JDf7dk3RncDjp7sxHPmQu3XdPhSpKwSvliqMVyfvfniEbGUH8FplXlTqg9vHrxHmbe0/HjU7Yh+CjYeRZvlvLdT5qsT6c08W7xH5qf0pA1F6z3I/Af9ZQcnk6QQBvAhZX6TJEn0UPzmsqjtd9qkkw39TpuHI3+nzVuVeQCZh8yDv1DmvbRB+2+onD7k0/mxv6ESMg8g8wC8GZl/FhF9s0DmIfMAQOb/kuYCyDwAkHkAAACQeQAAAJB5AAAAkHkAAAAvKfMuAACADwye+wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB+Iwev97nav+/WEv9qqf8/7RKbTp9byQXK4iAenpFpMX67bNosXz3bgO49uoLOqXnKXe/vtx8+f/xaFfv91aqWdiXfihT9L1t/R+ny5az7213OoEnhm5v68sMSlsb35Os+MoWVGgcVGB/1MzNVbzc/s+9Jcv3792j9SAOspTXGn/GnuwdI98FGboLSkOnUZjC9kvXg4e2Rtp91ud3pUbQt+/fzesvpOF0fLvDdpkenB958/fxySeUlZqKRW/pThqMv8dG9lf1Tr430/WeB29uLWBa9rrC1fz/OuR1/Oljl/SjZNkqt6rDZuDdQY9/LYVZJTUlZVM9+p5lL8aSsAAI/FjSa5dXzm3TnNhniSDfLJXO3N63tievPJoHhfNdf61Ng3E2opm28PJV56Bz5qc9xb5e40J9efV53602s7VcE5oraFHP/4r02OF8cvWY4/aMv2rHfQYZaUViUXu2T08HAcs62pC/v8+8ke+M5FZLt78/4g63qD5WTu5X1PtZhtmiQ3F9lVGy/dkvnqyDpJSsqqOh92qflgsnvO5DlUCTy3zG82ke+qcS/73fxskAaZmxkNFhtlP2eZz9fGtfmae92v7OJkS+PH52yuZvKw48P38UWaG/Sim3OaLl+/dj2bsjExBstu12jJIlt2V46RioDfehv1gMWZdLv0KWkP6TZ9uvHolm53IRc3HrmdlMPZgjMwPiWldCYPnAG9WzkD392YW/keSkmfknRm1eDRQxCPRnOzy/HkteC+GSxa5uXAD1Y2PypzUVaorK3o3IHaDvr1LdGP/7b1ssspTeMpgbtYrHLKb9rlGlC2LpdnXtQu6b9qtr++D8w24VebCz5daLY25dTn4XA3InLTfMk9VSmsGCTtVNtA83UhPj030EZ/FtJcdqS3hP3HT95m/JK1bS7v6NPvg5Zl27zKgZSVT1pflLmUt/VO9bpLU7aX/p4H2WSgWqzeN+1Jv67nauNny6D/le41cyCnbWxpxuYrJWGvx9ycyZflmabkxcNY/nwSsKlbNV/SBCA74690c3f36nHSJheAMrBirGow+b0mKV7+7laNzMj8ZjNSPzEj25zH8zT1lgO1UZ0ChWciPj7daRYAMXL2e+hFUR9zG60MdFHV3ro0jd0oey2D5ZSkxsxMl+ass1oOSKcmHsUN+KIvauMuOJJA4mkdRHHl9KI67iRb9FKBco3mUMq+Q26qtyGpN8q7YC+T8mK3NatozyAeXZw9XHAsnl4arCHFb4lzkOy6tkzO1m3W1llJVfbV1nRerW9anW4JpATcOaZh2XKZLbgvqCkbLkz7rfCha9n++M/4882MTXe4lItma1MueDio/8/s22m9MGmgedlO1QbmHnep9riN/hRed14xvV8/f7KiU+Tmh6nXj38rHj4F6reD9YVhmDKXrt2s2dZLmdZqmp26JFXO8swIfWzddnJLaDZYD1xMle4kM2ZZt07LoJ+LjedVGy9cd07JG9SMVL+0fg2GUhJTEF3szuu7hv2hTQCOIVvyi3wbNtOuV91Lkjc/mlpv/ivvX4210kxQGxUHpTA/SZuLlZt/ZMPZ18KLJ7snATeaznOIIqJf8+0dbCYf8vxfTKuCbj1XV1SSJrXL8sIKPSWfclrGA+xFFRRXfEobJyblVX2akqfpUmiB7iSXcKkedSMWP2XXnXb9JPH7TmBJV8oyi2zrtaX6LvbXdjs23ybzNpBCq4RpjSlqOmXvm1dGzpIu0W1tRxKD7/99/7W1fnhLJ194JIqcraakjjLf2ZCXyr0WZtugg6SdWoZnOF6iPW4r7XZboyv//lCXnrRdRX3w/efcrgFboSttoNZPe9G2XstUq9lak7vsq2RGYbNcXQ72ZEiw1dbFxknQyVjzpXwnZqy3URJzG7v263lxYiopdefLgk5ZSsSf/6fMMr64zPfH3822A6IFToXNVCS+JVzobiaxU4QvA2Of8VxcbT2BtTNBQ+nq45P4G1vN2ae3VssLSpfjnl43q7glLPSNeKS8pamp7jtphYRUrUqx1JpJbS7QxDb+pcacWeglHlBcFJlSt1GnuSiSS3eSVLEA+APWio3XHrcnt92LPTp59fyL/SewUqQt02a7VVuuzb7atsj8YHe4meWUM1+4qqLcXFnOWJLbwuS97ybT/5oZe4ssW7hUTw0ucUodDttDmp0Wpm2wg6SdWoRnZHeiPV62sFXoyYfnWM0vlfqzQuj/bT0s1gZSeVQ5qZG23papVrPlJOfGIRlwS5aZPYG1507ZsnJcRP+r354vC/eGfRdx0o2NlwF4EXpJaU9g6d5yXuindAtNC14ndsffjz4NAGA71rdD5ueTi0G5oTb2Jwa7tA4PWx3HIsX8xL7pf9p8mrzZfZcgKEdxeCNrnJ2sasuUQeOoVsrhQMeiiJ9IrNUGC8g1o3Avucjkdk+nD04ZrxERKi+KcKoUbdxqKJciKhJ3UHePg0MbdXnn68o2WYM1nj/n8A2dwE4v2Kmf53x6MdgSXi3TZrtd24WG6XfVtpHt2ZmcwDaCDjYQY7zszOTjkj+vux8OV/S1ndPyQZlqtuQs8y6hlq2zfPD8vqvZFrsMGY7BUhdNWa60MG1DZZAqwyGL9tz2OFXaeSg3I1ktNC/Cbta0OUXhyav/UQRs/v3e0jW2gdNFsVHzFoNa611rNY2UfY6WcLCEnfGscu5UeNdi4yzQfQ5aarBGTbiIVNJJU1aLskjKXFOKn8NZm22xfsrTYj3nBYQ2ubVxWC5N7WhjjAdtwONC811vj8x7hUvLp2N590JnAu8Cup7MhExOoHLZHMiREx1SrcQz4S0smfbXbrzkWwKaI3LUVDxzuWw5gaWTu0WhFVYqKDxgNMV8WeZTjuEESw5IT8/kGT+WxwUntRfNzZXjN7crJ7ASqzZJco2hmJcpc/NQHOw2TmDJbedgzWgU0LGr+UqFXoxGHLZZVmLL1p/VMinbYNGoLZ9MLs4O1LZ2WEjPPf78+WvrXNaV80+TxcZjV57UdyFnrVMJP5kv04UrNWqewBo5/clhkdqnzsrVx2kWnLukLKR7w/lal1wL0zboIGmn2gaeyWGu9jhVmpaMrta97QTWM/WidY3a/Uta/6/2wq9Gj9sG6lk3VYGyLVtPZVqrqbaTvze6yl67sVp+HmApfjbtKo2pUs3ExtVg5SGCzJqx+dKf5GzjmTHdTLfIEr/XlPS/ntmyTWX8Vj8l+//d5/mQTubN+i2ztcu6jxNY8OioTb5L5h8Z79/5rPzRVpqd7rVMl4Nn6pJHP09/Qu89ubYvdBj3ds74WmNTR/T4038a4nFjvO8xyNPjLu3jcGwZALz8DmH5xJnwmM2pu3KepfIP5ZOCpzb7a/7narv8+iJy/ELZPma9+f7v43r86T8N8bhl8Nif9MiO+YHBHeOQ9QdnALyNDUL2JEeG50z3tJ/qdlbPpPIaMHlZnq+2H5XB9z0/knugc/2XlMLdYn6sBD/+B5zma/yqAwAAAAAAAAD4gHwCAADwgTm7BAAA8IGBzAMAAGQeAAAAZB4AAABkHgAAwGvJ/NX/ZrPZ/67QJQAA8CFlfjwTxugTAAD4gDJ/NZv9M+PXTn/+6n5Iy8H5edj4/J/r/WWE5+fti0clZXx3UrWz0Tf6cjv5sn2pm9U/2Mr6y+T2MV3VVhjXpD2/yqftKbe5i/X+1aq1hnH/y2lV/jaSfqq3Y9WNX9KkwpvPL262rSb1+eb8/mqfvbUxrt37+aZW+fF9ZTaEwx1ZXP9zYM78EQ5OwzeS59ag1Xu8dejaTEqF6Or+XC7WxqqZbY1huL/R9+f3V89mott62bzvT1iIlfn/zf65Cv8Jr/6Z/a/S3PPz4bbJDvfIfHsPfr45WuZVvw8pcSxSfteyOLyYzFcLi7tWKk1NDsr83ZFr2F1cSnH2/DIvNfo2ysy/I9fRIp/udhOGxozbRnYoE2x4furGkAxue3IeY1Kfb2bXFcHdZW+2kOGxMn81e22ZPyBJ0gSu8zNI8lZhLyHzRveqXX6UzA9bNVurK82vj9UOmZcU+/t0n/GcNEg2o+Ebkvmb2Sz8NP70v9ns5tAYvwGZV/f4OL1+Jpmvpsriyy/9zNbkkMwfXV4p89Vvn41Hy/yXfjBqkfnZzefdMv85PEahLg/O8KNM6ioMx8fJ/PVszK8jF56nyvyT+XAyT116NTuxw06X+X0N3N+njxjN9yPzFLAZD8YUuGmOcSjLb7EV1r46PycPipyj2XXV/ydfKax8WDTY7KnJWbuetaS8jNN+d/TtS5/+TmhMznK32//yZTRlr9k4k11yZAvnVN3jLJYYhEl5eZePuqtburUW8KCc7viLyYA02bxstpry1ve71R1A1uW3kiTOV3HMV6mw2/5toYCyelBNqtWka5KSRLVMWbThTr7EWsi0z2+lzDt/1FWHPY5JXbuVxtAtmjvdyt/e2TbQp3SrVkGzzWTPoV2jnWqyzrgQSnpni6baco3zVWUcKu78nYhkWDXu8IpGtukfW+W9vrm+LExBfbhh+W4oJhBu2bvcen0T0j3WpK5uhpzE+oJ1JR+Ox+GWzIu9XbEIhOPqjDT/aX42zsPFhHaHPQxnNfvV+plPKTNtg04LMmfKImTjttWsb9ypJmV+9p5wOLMZUbah5EM12Wp93RPWi8XCdc51v/onLCpUprCFSbZS6yH3Ar30UxmHorC2qX05DsMdIziUoQvLQarM9GGrqpn/tPU2pkH1ur/S4ag3sGzKDbfejLGMc13m2yI6tpp1eRqajGwDx41xsL1pDa0xSLWaaOubgxQ2THRoGzi7/nxzxV1ZdE3YmvL4OfMc3vx9sb3iuVKrNk0r8+K1ecubD8P6AswpP98M5QrdNmymjFe37GPWvPkvfQl8Z3E9BvFlxFr4zb8tYzh3pH1x03cmtTRiSF+MMFqZ75fxdJPydhVXnddMlFWTxP1sdUeKLoXRd6LvWkOqiebHUmiSaUrzSRyX1dQ20Bf99tb/xmEYk5+WSW3g3O94neiz+pJyq+RSCv1qZdm2Qa58G8VFdEcyijVb+kbv/9JXleeljSTfrF6FzNfGgZYAXT7aZH4cmpGlgWzxj4dj1tawFjhVqxFrr4hv1fkZG5s2eV6bvQLbh5gURT/MW73YkPnP4bWsKVWZV3szF4ZDW6CqjBEGzU+TUP1FLWQZMGa/7WSF97yqaRt0WvDuwGQxHIpV22xrjRqH9UBOyPeEpi2mFJtSOoraYV6N1lvxanRN3Zs32Y5pf3V1WTbXVkiz5fkXFjJffDquzt72qU17LZN9fQTt2FuZl8I+34TS9lpNqh1iCtLW2x63G0MdjnoDy34zNThK5vVis3jroXKNi9bXxkHztobWuFirSWH527ugLb1USQzH5pLYI710OBopj58zzxKb1442qwkvJ/Vq0wpmahy2BG24RlvGzhOR7ZCXy0ZKq591maf/WYjrQWmNaMi97Hne8WcsdlWZlwzuWGiNvluZ12w1pX5aj/HYJPEd/2cLI4HlNUZ1r1xY4owvZKMvmtLkfleppraBXWrafKhnfVeNK1FuIsx3mq4e7+H2aUpzSxYXrf/S54XCNqOIU0lu2jWSmVnVull8ZzuRijLCXsh8fRwa3nxjzphxvRE/eksUabKQ16I7YL2uVmO+DsWyQuuPimCqC0AGU8xmlXkxFb1ojVFS8kQPxw2ZV3u7vrkahp/M90N2WgqZt6ZXyjx7rtbbb9lqq5bZNsi0oKJNFmzU5+FWlEOqeXVf3RvQPTzHh3puzCmvZzyryWczHm2j9bbHG12zFbQxL/Etx41JXMm2IvP6qR2H0u9smdoqpvURtGNvZV5ut1/qNWnK/LC2vyJdGBbD0Whg2RRasU6QeWto20GbSuvr42DzVkNrXKzVpLD8uq206aWVxOFwHF4ZrZeuscNRT3nUnHmkzH+60Sdtbj41LKRY1esyX35/osyTmz88TeYvrYyp5vi3lXNYddgfIfOa8jiZl8LMxxqCKe/aJfOTTML3elwsbdA3FP2hMnfIfLE8bHvzNqX5nvLSNnC4JjtK5qmvunbrc0Dmm958cyKNh7tknufQtsmOS4vWTXUxR2Wanybzlc0u59ci88aBGg7LrWURtKnJvI2YHCXz48vKtChk/qo1mG2rqSLeKvNXxb3nY+v4P0Hm66JnZb7MtirzYTlcHI4KL3dObSvztRHcL/Ot8lsGbaojUoQinlnmG7JYl/mwGiwsxqFd5q9aatIu8616aSXR2KKZM1d261aXeU15wpw5WebNoPBj85X2WAuZyb6mLvPDmb14PZs194+8Fwkvt4M29ApD3vs3Ulp5UaGSQ0LSnUK5siJoUwl6iADdrkTmWd1U5rPunVy860rQxryMRH4b9b9otjZlIfOc5FIC1zaJlXkbL8nu0ltS7MrhwGWmSzB/AAAFLElEQVQlP3ppSvMph/JtSo0tSe5USFx681pmIfMc7eHarprevE15mWbxt6L1KthWjbdlPr6zncrvJFJjizYvihDFq9vmOOyPzRs7nY3bz9RkNo+tGYirbK2mIgISbLmsblIpYjsrZ3PtgFEv1mVepOHmejtoQ69hOB7fhM0TwLrMX20tA7tlvrR8mhYmr8835BLqOeAOma/OVrqH9x86jctJy1GfcU3maxrW7JraRLUqOBu2yLxmy/3B0enPHDq6LyplF8WdU1srUh9B25sh+caFzOuCXdSEYjDNNjRkvuidI2SegkT3R8t8bbUpA3PDsvWNcSiDNpVq1p/otCuqtfytQdrWS5XEq5vh9c2NHSQ7HI2UR82ZWqceL/OXn4bhTTj8tGUhtGEJb65l3zLmjQWtKqE9bL0f31T9dj3Yqqw4NiXtsOXY534YNlMWQW99VDHjI1g9g7xTd1Zk3j4nYiXS3Jne2Xs4iEFpRLPpGXGWv+KgcjoqstWUDZnnnLLiMFNl3grnl36st5j6aU1sfvS1PInlQ4VukdK2Qc6E6Z50VMi8llmXefow3Qra2JT64Ki2wZ7PUhW41kWuplBbtHQqZTCZyAEtNfiu6OPcv90aBxX5rpwYN2Wew5zj7a25dYkkREd2OizO8Y196LElG8a4vgOQaMj9VTnVxaQqEUSbskg6lkjokI/P7q8a9ja8v6pKn9ZW89MkegJojXuvzGsbdFpQkvFN0Za6zFfnTHhZPfPiU71hedPYNl6/Nlpf2dVXu6aymwmt9jROTm2FNHt6yvyGB2A2DO2nxThoYa1T20pZbQSL3jTZDstB0liarUldkYZ6ZD0s4hT2+De0w7FX5imJcYhtyrHGNBoif17kV30GXhpoh1f7pD4OtuB6NeumamsyrvdbWca2Xqok0ulFWHaN+RIOmykvj5ozj5X5N0j7k4jtPxp196I/8rPzR6MemfJxPXBMefuf0wTtT/mRPoXhHyzsFQmHb28AqE4nP2YJ3pvMT7ptGJHrHglpWffjQTKvDRQn/xF5PFvX3H7YWUD7Y3s2AJn/83Dfj2fX0OOPLfOnePN/k8ta6YFYwjLw5l9E+s7Pz/+QMw+Zb+uT+/Nn+Q0D4B3KPAAAgCfLPP4cLgAAfOg/+Q0AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACrxfA3QCAAB8XH78+Bc6DwAAH9ibh84DAAB0HgAAwLvl148fv9ALAAAAbx4AAABUHgAAwJsCKg8AAB/bm8dz8wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPAS/D/aTaucrpTjUAAAAABJRU5ErkJggg==" alt="跨域报错"></p> <p>当出现上述情况时，客户端请求页面和服务端不属于同源，已经出现了跨域，这时我们可以使用 JSONP 来解决上述问题。</p> <p>JSONP 跨域客户端的具体实现：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token constant">DOCTYPE</span> html<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>html lang<span class="token operator">=</span><span class="token string">&quot;en&quot;</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>head<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>meta charset<span class="token operator">=</span><span class="token string">&quot;UTF-8&quot;</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>title<span class="token operator">&gt;</span><span class="token constant">JSONP</span>跨域<span class="token operator">&lt;</span><span class="token operator">/</span>title<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>head<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>body<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>button id<span class="token operator">=</span><span class="token string">&quot;btn&quot;</span><span class="token operator">&gt;</span>点击<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
        <span class="token comment">//回调函数</span>
        <span class="token keyword">function</span> <span class="token function">handleResponse</span><span class="token punctuation">(</span><span class="token parameter">response</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	        	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'success...'</span><span class="token punctuation">,</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        window<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        	<span class="token keyword">let</span> btn <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'btn'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        	btn<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        		<span class="token comment">//创建一个script标签</span>
                <span class="token keyword">let</span> script <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'script'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token comment">//设置srript的src</span>
                script<span class="token punctuation">.</span>src <span class="token operator">=</span> <span class="token string">&quot;https://api.douban.com/v2/book/search?q=javascript&amp;count=1&amp;callback=handleResponse&quot;</span><span class="token punctuation">;</span>
                <span class="token comment">//插入到文档中</span>
                document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">insertBefore</span><span class="token punctuation">(</span>script<span class="token punctuation">,</span>document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>firstChild<span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>html<span class="token operator">&gt;</span>
</code></pre></div><p>浏览器截图为：
<img src="data:image/png;base64,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" alt="JSONP跨域请求"></p> <h4 id="_2-postmessage-跨域"><a href="#_2-postmessage-跨域" aria-hidden="true" class="header-anchor">#</a> 2. postMessage 跨域</h4> <pre><code>window.postMessage() 方法可以安全地实现跨源通信。通常，对于两个不同页面的脚本，只有当执行它们的页面位于具有相同的协议（通常为https），端口号（443为https的默认值），以及主机  (两个页面的模数 Document.domain设置为相同的值) 时，这两个脚本才能相互通信。window.postMessage() 方法提供了一种受控机制来规避此限制，只要正确的使用，这种方法就很安全。

window.postMessage() 方法被调用时，会在所有页面脚本执行完毕之后（e.g., 在该方法之后设置的事件、之前设置的timeout 事件,etc.）向目标窗口派发一个  MessageEvent 消息。 该MessageEvent消息有四个属性需要注意： message 属性表示该message 的类型； data 属性为 window.postMessage 的第一个参数；origin 属性表示调用window.postMessage() 方法时调用页面的当前状态； source 属性记录调用 window.postMessage() 方法的窗口信息。
</code></pre> <p>语法：</p> <div class="language-js extra-class"><pre class="language-js"><code>otherWindow<span class="token punctuation">.</span><span class="token function">postMessage</span><span class="token punctuation">(</span>message<span class="token punctuation">,</span> targetOrigin<span class="token punctuation">,</span> <span class="token punctuation">[</span>transfer<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>参数：</p> <ul><li>otherWindow ： 其他窗口的一个引用，比如在 A 页面中使用的 window；</li> <li>message ： 将要发送到其他 window 的数据；</li> <li>targetOrigin ：通过窗口的 origin 属性来指定哪些窗口能接收到消息事件，其值可以是字符串&quot;*&quot;（表示无限制）或者一个 URI；</li> <li>transfer(可选) ： 是一串和 message 同时传递的 Transferable 对象. 这些对象的所有权将被转移给消息的接收方，而发送一方将不再保有所有权。</li></ul> <p>示例代码如下：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// postMessage</span>
<span class="token comment">// 窗口A(http:A.com)向跨域的窗口B(http:B.com)发送信息</span>
window<span class="token punctuation">.</span><span class="token function">postMessage</span><span class="token punctuation">(</span><span class="token string">&quot;data&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;http://B.com&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 在窗口B中监听</span>
window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span>
    <span class="token string">&quot;message&quot;</span><span class="token punctuation">,</span>
    <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>origin<span class="token punctuation">)</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>source<span class="token punctuation">)</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token boolean">false</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="_3-websocket"><a href="#_3-websocket" aria-hidden="true" class="header-anchor">#</a> 3. WebSocket</h4> <p>WebSocket 协议在 2008 年诞生，2011 年成为国际标准。所有浏览器都已经支持了。</p> <p>它的最大特点就是，服务器可以主动向客户端推送信息，客户端也可以主动向服务器发送信息，是真正的双向平等对话，属于服务器推送技术的一种。</p> <p>特点：</p> <ul><li>没有同源限制，客户端可以与任意服务器通信。</li> <li>协议标识符是 ws（如果加密，则为 wss），服务器网址就是 URL。</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> ws <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WebSocket</span><span class="token punctuation">(</span><span class="token string">&quot;wss://echo.websocket.org&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

ws<span class="token punctuation">.</span><span class="token function-variable function">onopen</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">evt</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Connection open ...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ws<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&quot;Hello WebSockets!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

ws<span class="token punctuation">.</span><span class="token function-variable function">onmessage</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">evt</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Received Message: &quot;</span> <span class="token operator">+</span> evt<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    ws<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

ws<span class="token punctuation">.</span><span class="token function-variable function">onclose</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">evt</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Connection closed.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>浏览器截图如下：
<img src="data:image/png;base64,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" alt="WebSocket截图"></p> <p>详情参考阮一峰老师的<a href="http://www.ruanyifeng.com/blog/2017/05/websocket.html" target="_blank" rel="noopener noreferrer">WebSocket 教程<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h4 id="_4-cors"><a href="#_4-cors" aria-hidden="true" class="header-anchor">#</a> 4. CORS</h4> <p>CORS 需要浏览器和服务器的同时支持。目前所有的浏览器都支持，IE 浏览器不能低于 IE10。</p> <p>整个 CORS 通信的过程都是浏览器自动完成的，不需要用户参与。对于开发者来说，CORS 通信与同源的 AJAX 通信没有差别，代码完全一样，浏览器一旦发现 AJAX 请求，就会添加一些附加头信息，有时还会多出一次附加请求，但是用户不会有感觉。因此实现 CORS 通信的关键是服务器。只要服务器实现了 CORS 接口，就可以实现跨源通信了。</p> <p>详情参考阮一峰老师的<a href="http://www.ruanyifeng.com/blog/2016/04/cors.html" target="_blank" rel="noopener noreferrer">跨域资源共享 CORS 详解<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/myBlog/CSS/弹跳的小球.html" class="prev">
          弹跳的小球
        </a></span> <span class="next"><a href="/myBlog/HTTP/浏览器的协商缓存与强缓存.html">
          浏览器的协商缓存与强缓存
        </a>
        →
      </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/myBlog/assets/js/app.d8f8619c.js" defer></script><script src="/myBlog/assets/js/2.5db888ed.js" defer></script><script src="/myBlog/assets/js/4.2642395b.js" defer></script>
  </body>
</html>
